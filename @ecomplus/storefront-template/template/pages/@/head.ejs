<%- await include('/@/meta') %>

<script>
if ('serviceWorker' in navigator) {
  navigator.serviceWorker.register('/sw.js').then(registration => {
    console.log('SW registered: ', registration)
  }).catch(registrationError => {
    console.log('SW registration failed: ', registrationError)
  })
}
</script>
<link rel="stylesheet" type="text/css" href="/storefront.css">

<%
// inject custom code
const customCode = _.cms('code') || {}
if (customCode.css) {
  %>
  <style>
    <%- customCode.css %>
  </style>
  <%
}
// redirect to maintanance page
const maintanance = _.cms('maintanance') || {}
if (maintanance.active) { 
  %>
  <script>
  if (location.pathname !== '/maintanance') {
    location.href = '/maintanance'
  }
  </script>
<% } %>
<%- customCode.html_head %>
