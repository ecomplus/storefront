{"version":3,"sources":["webpack:///../widget-product-card/src/components/scss/EcProductCard.scss?d349","webpack:///../widget-product-card/src/components/html/EcProductCard.html?b0bc","webpack:///../widget-product-card/src/components/EcProductCard.vue","webpack:///../widget-product-card/src/components/html/EcProductCard.html","webpack:///../widget-product-card/src/components/js/EcProductCard.js?a5a2","webpack:///../widget-product-card/src/components/scss/EcProductCard.scss?5626","webpack:///../widget-product-card/src/index.js","webpack:///../widget-product-card/src/components/js/EcProductCard.js","webpack:///./template/js/lib/load-widgets.js"],"names":["options","elClass","setupComponent","$productCard","productId","sku","product","isLoaded","Vue","render","h","EcProductCard","class","attrs","props","scopedSlots","default","domProps","innerHTML","outerHTML","$mount","$productCards","document","querySelectorAll","productIds","i","length","dataset","indexOf","push","preFetchPromise","skipSearchApi","search","EcomSearch","dsl","aggs","sort","setPageSize","setProductIds","fetch","timeout","then","items","getItems","load","catch","err","console","error","Promise","resolve","toRender","Array","isArray","find","_id","finally","$parent","parentNode","JSON","parse","e","undefined","observer","lozad","observe","name","components","EcImage","EcPrices","lang","type","String","$ecomConfig","get","storeId","Number","Object","buyText","canAddToCart","Boolean","data","body","isLoading","computed","strBuy","dictionary","isActive","available","visible","inStock","discount","onPromotion","Math","round","base_price","price","methods","setBody","assign","body_html","body_text","fetchItem","store","url","$emit","slug","pictures","buy","variations","window","location","ecomCart","addProduct","created","ecomClient","ecomPassport","emitter","emit","isCheckout","pathname","startsWith","isMobile","screen","width","widgetsLoadPromises","widgetsMsDelay","hostname","loadWidget","pkg","runImport","waitWidgetResolve","setTimeout","widget","_widgets","active","desktopOnly","enableCheckout","disablePages","exp","log","resource","getElementById","all","widgetProductCard"],"mappings":";;;;;;;;;AAAA,uC;;;;;;;;;;;;ACAA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL;AACA,wBAAwB,SAAS,0CAA0C,EAAE;AAC7E;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,yBAAyB,8CAA8C;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,qBAAqB;AACrB;AACA;AACA;AACA,yBAAyB,2CAA2C;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,iCAAiC;AACjC,+BAA+B;AAC/B;AACA;AACA,+BAA+B;AAC/B;AACA;AACA;AACA;AACA,gCAAgC,uCAAuC;AACvE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,qCAAqC;AACpE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B,kCAAkC;AACjE;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,kCAAkC;AAClC,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,+BAA+B;AAC/B,yBAAyB;AACzB;AACA;AACA;AACA;AACA;AACA;AACA,wCAAwC;AACxC,+BAA+B;AAC/B;AACA;AACA;AACA,iCAAiC;AACjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,4BAA4B;AAC5B,mBAAmB;AACnB;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;ACpKA;AAAA;AAAA;AAAA;AAAA;AAA4G;AACzC;AACL;AACkB;;;AAGhF;AACiH;AACjH,gBAAgB,+HAAU;AAC1B,EAAE,qFAAM;AACR,EAAE,w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","file":"a267df41583df8eab87c.js","sourcesContent":["// extracted by mini-css-extract-plugin","var render = function() {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  return _c(\n    \"div\",\n    {\n      staticClass: \"ec-product-card\",\n      class: _vm.body._id && !_vm.isActive ? \"ec-product-card--inactive\" : null\n    },\n    [\n      _c(\"transition\", { attrs: { \"enter-active-class\": \"animated fadeIn\" } }, [\n        !_vm.isLoading\n          ? _c(\n              \"section\",\n              [\n                _vm._t(\"discount-tag\", [\n                  _vm.isActive && _vm.discount > 0\n                    ? _c(\n                        \"span\",\n                        { staticClass: \"ec-product-card__offer-stamp\" },\n                        [\n                          _vm._v(\"\\n          -\"),\n                          _c(\"b\", [_vm._v(_vm._s(_vm.discount))]),\n                          _vm._v(\"%\\n        \")\n                        ]\n                      )\n                    : _vm._e()\n                ]),\n                _vm._v(\" \"),\n                _vm._t(\"body\", [\n                  _c(\n                    \"a\",\n                    {\n                      staticClass: \"ec-product-card__link\",\n                      attrs: {\n                        href: \"/\" + _vm.body.slug,\n                        title: _vm.name(_vm.body)\n                      }\n                    },\n                    [\n                      _c(\n                        \"div\",\n                        { staticClass: \"ec-product-card__pictures\" },\n                        [\n                          _vm.body.pictures && _vm.body.pictures.length\n                            ? _vm._l(_vm.body.pictures.slice(0, 2), function(\n                                picture,\n                                index\n                              ) {\n                                return _c(\"ec-image\", {\n                                  key: index,\n                                  staticClass: \"ec-product-card__picture\",\n                                  attrs: {\n                                    src: picture,\n                                    pictureBreakpoint: 300\n                                  }\n                                })\n                              })\n                            : _c(\"ec-image\", {\n                                staticClass: \"ec-product-card__picture\"\n                              })\n                        ],\n                        2\n                      ),\n                      _vm._v(\" \"),\n                      _c(\"h3\", { staticClass: \"ec-product-card__name\" }, [\n                        _vm._v(\n                          \"\\n            \" +\n                            _vm._s(_vm.name(_vm.body)) +\n                            \"\\n          \"\n                        )\n                      ])\n                    ]\n                  )\n                ]),\n                _vm._v(\" \"),\n                !_vm.body.available || !_vm.body.visible\n                  ? _vm._t(\"unavailable\", [\n                      _c(\"p\", { staticClass: \"badge badge-warning\" }, [\n                        _vm._v(\n                          \"\\n          \" +\n                            _vm._s(_vm.dictionary(\"unavailable\")) +\n                            \"\\n        \"\n                        )\n                      ])\n                    ])\n                  : !_vm.inStock(_vm.body)\n                  ? _vm._t(\"out-of-stock\", [\n                      _c(\"p\", { staticClass: \"badge badge-dark\" }, [\n                        _vm._v(\n                          \"\\n          \" +\n                            _vm._s(_vm.dictionary(\"out_of_stock\")) +\n                            \"\\n        \"\n                        )\n                      ])\n                    ])\n                  : [\n                      _vm._t(\"prices\", [\n                        _c(\"ec-prices\", {\n                          staticClass: \"ec-product-card__prices\",\n                          attrs: { lang: _vm.lang, product: _vm.body }\n                        })\n                      ]),\n                      _vm._v(\" \"),\n                      _c(\n                        \"div\",\n                        {\n                          staticClass: \"ec-product-card__buy fade\",\n                          on: { click: _vm.buy }\n                        },\n                        [\n                          _vm._t(\"buy\", [\n                            _c(\n                              \"button\",\n                              {\n                                staticClass: \"btn btn-block btn-primary\",\n                                attrs: { type: \"button\" }\n                              },\n                              [\n                                _c(\"i\", {\n                                  staticClass: \"fas fa-shopping-bag mr-1\"\n                                }),\n                                _vm._v(\n                                  \"\\n              \" +\n                                    _vm._s(_vm.strBuy) +\n                                    \"\\n            \"\n                                )\n                              ]\n                            )\n                          ])\n                        ],\n                        2\n                      )\n                    ],\n                _vm._v(\" \"),\n                _vm._t(\"footer\")\n              ],\n              2\n            )\n          : _vm._e()\n      ]),\n      _vm._v(\" \"),\n      _vm.isLoading\n        ? [\n            _vm._t(\"default\"),\n            _vm._v(\" \"),\n            _vm.error\n              ? _c(\n                  \"div\",\n                  {\n                    staticClass: \"alert alert-warning small\",\n                    attrs: { role: \"alert\" }\n                  },\n                  [_vm._v(\"\\n      \" + _vm._s(_vm.error) + \"\\n    \")]\n                )\n              : _vm._e()\n          ]\n        : _vm._e()\n    ],\n    2\n  )\n}\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns }","import { render, staticRenderFns } from \"./html/EcProductCard.html?vue&type=template&id=4172eace&lang=html&\"\nimport script from \"./js/EcProductCard.js?vue&type=script&lang=js&\"\nexport * from \"./js/EcProductCard.js?vue&type=script&lang=js&\"\nimport style0 from \"./scss/EcProductCard.scss?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../storefront-template/node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\n/* hot reload */\nif (module.hot) {\n  var api = require(\"/home/leo/code/storefront-template/packages/@ecomplus/storefront-template/node_modules/vue-hot-reload-api/dist/index.js\")\n  api.install(require('vue'))\n  if (api.compatible) {\n    module.hot.accept()\n    if (!api.isRecorded('4172eace')) {\n      api.createRecord('4172eace', component.options)\n    } else {\n      api.reload('4172eace', component.options)\n    }\n    module.hot.accept(\"./html/EcProductCard.html?vue&type=template&id=4172eace&lang=html&\", function () {\n      api.rerender('4172eace', {\n        render: render,\n        staticRenderFns: staticRenderFns\n      })\n    })\n  }\n}\ncomponent.options.__file = \"widget-product-card/src/components/EcProductCard.vue\"\nexport default component.exports","export * from \"-!../../../../storefront-framework/node_modules/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!./EcProductCard.html?vue&type=template&id=4172eace&lang=html&\"","import mod from \"-!../../../../storefront-template/node_modules/babel-loader/lib/index.js??ref--1!./EcProductCard.js?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../storefront-template/node_modules/babel-loader/lib/index.js??ref--1!./EcProductCard.js?vue&type=script&lang=js&\"","import mod from \"-!../../../../storefront-framework/node_modules/mini-css-extract-plugin/dist/loader.js!../../../../storefront-template/node_modules/css-loader/dist/cjs.js!../../../../storefront-framework/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../storefront-template/node_modules/postcss-loader/src/index.js??postcss!../../../../storefront-template/node_modules/sass-loader/dist/cjs.js??ref--0-3!./EcProductCard.scss?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../storefront-framework/node_modules/mini-css-extract-plugin/dist/loader.js!../../../../storefront-template/node_modules/css-loader/dist/cjs.js!../../../../storefront-framework/node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../../../storefront-template/node_modules/postcss-loader/src/index.js??postcss!../../../../storefront-template/node_modules/sass-loader/dist/cjs.js??ref--0-3!./EcProductCard.scss?vue&type=style&index=0&lang=scss&\"","/*!\n * @ecomplus/widget-product-card\n * (c) E-Com Club <ti@e-com.club>\n * Released under the MIT License.\n */\n\nimport Vue from 'vue'\nimport lozad from 'lozad'\nimport '@ecomplus/storefront-twbs'\nimport EcomSearch from '@ecomplus/search-engine'\nimport EcProductCard from './components/EcProductCard.vue'\n\nexport default (options = {}, elClass = 'product-card') => {\n  const setupComponent = ($productCard, productId, sku, product, isLoaded) => {\n    new Vue({\n      render: h => h(EcProductCard, {\n        class: elClass,\n        attrs: {\n          'data-product-id': productId,\n          'data-sku': sku\n        },\n        props: {\n          ...options.props,\n          productId,\n          product,\n          isLoaded\n        },\n        scopedSlots: {\n          default () {\n            return h('div', {\n              domProps: {\n                innerHTML: $productCard.outerHTML\n              }\n            })\n          }\n        }\n      })\n    }).$mount($productCard)\n  }\n\n  const $productCards = document.querySelectorAll(`.${elClass}`)\n  const productIds = []\n  for (let i = 0; i < $productCards.length; i++) {\n    if ($productCards[i]) {\n      const { productId } = $productCards[i].dataset\n      if (productIds.indexOf(productId) === -1) {\n        productIds.push(productId)\n      }\n    }\n  }\n\n  let preFetchPromise\n  if (productIds.length >= 6 && productIds.length <= 70 && !options.skipSearchApi) {\n    const search = new EcomSearch()\n    delete search.dsl.aggs\n    delete search.dsl.sort\n    search.setPageSize(productIds.length).setProductIds(productIds)\n\n    preFetchPromise = search.fetch({ timeout: 5000 })\n      .then(() => {\n        const items = search.getItems()\n        for (let i = 0; i < 2; i++) {\n          load($productCards[i])\n        }\n        return items\n      })\n      .catch(err => {\n        console.error(err)\n      })\n  } else {\n    preFetchPromise = Promise.resolve()\n  }\n\n  const load = $productCard => {\n    if ($productCard) {\n      const { productId, sku, toRender } = $productCard.dataset\n      if (toRender) {\n        let product\n\n        preFetchPromise\n          .then(items => {\n            if (Array.isArray(items)) {\n              product = items.find(({ _id }) => _id === productId)\n            }\n          })\n\n          .finally(() => {\n            let isLoaded\n            if (product) {\n              isLoaded = true\n            } else {\n              const $parent = $productCard.parentNode\n              if ($parent) {\n                product = $parent.dataset.product\n                if (typeof product === 'string') {\n                  try {\n                    product = JSON.parse(product)\n                  } catch (e) {\n                    product = undefined\n                  }\n                }\n              }\n            }\n            setupComponent($productCard, productId, sku, product, isLoaded)\n          })\n      }\n    }\n  }\n\n  const observer = lozad($productCards, { load })\n  observer.observe()\n}\n","import { $ecomConfig, name, inStock, onPromotion, price } from '@ecomplus/utils'\nimport { store } from '@ecomplus/client'\nimport ecomCart from '@ecomplus/shopping-cart'\nimport dictionary from '@ecomplus/widget-product/src/lib/dictionary'\nimport EcImage from '@ecomplus/widget-product/src/components/EcImage.vue'\nimport EcPrices from '@ecomplus/widget-product/src/components/EcPrices.vue'\n\nexport default {\n  name: 'EcProductCard',\n\n  components: {\n    EcImage,\n    EcPrices\n  },\n\n  props: {\n    lang: {\n      type: String,\n      default: $ecomConfig.get('lang')\n    },\n    storeId: {\n      type: Number,\n      default: $ecomConfig.get('store_id')\n    },\n    productId: String,\n    product: Object,\n    buyText: String,\n    canAddToCart: {\n      type: Boolean,\n      default: true\n    },\n    isLoaded: Boolean\n  },\n\n  data () {\n    return {\n      body: {},\n      isLoading: false,\n      error: ''\n    }\n  },\n\n  computed: {\n    strBuy () {\n      return this.buyText || this.dictionary('buy')\n    },\n\n    isActive () {\n      const { body } = this\n      return body.available && body.visible && inStock(body)\n    },\n\n    discount () {\n      const { body } = this\n      return onPromotion(body)\n        ? Math.round(((body.base_price - price(body)) * 100) / body.base_price)\n        : 0\n    }\n  },\n\n  methods: {\n    dictionary,\n    name,\n    inStock,\n\n    setBody (data) {\n      this.body = Object.assign({}, data)\n      delete this.body.body_html\n      delete this.body.body_text\n    },\n\n    fetchItem () {\n      if (this.productId) {\n        this.isLoading = true\n        const { storeId, productId } = this\n        store({ url: `/products/${productId}.json`, storeId })\n          .then(({ data }) => {\n            this.$emit('update:product', data)\n            this.setBody(data)\n            this.$emit('update:is-loaded', true)\n          })\n          .catch(err => {\n            console.error(err)\n            if (!this.body.name || !this.body.slug || !this.body.pictures) {\n              this.error = this.lang === 'pt_br'\n                ? 'Erro de conexÃ£o, clique no produto para tentar novamente'\n                : 'Connection error, click product to try again'\n            }\n          })\n          .finally(() => {\n            this.isLoading = false\n          })\n      }\n    },\n\n    buy () {\n      const product = this.body\n      this.$emit('buy', { product })\n      if (this.canAddToCart) {\n        const { variations, slug } = product\n        if (variations && variations.length) {\n          window.location = `/${slug}`\n        } else {\n          ecomCart.addProduct(product)\n        }\n      }\n    }\n  },\n\n  created () {\n    if (this.product) {\n      this.setBody(this.product)\n      if (this.product.available === undefined) {\n        this.body.available = true\n      }\n      if (this.product.visible === undefined) {\n        this.body.visible = true\n      }\n    }\n    if (!this.isLoaded) {\n      this.fetchItem()\n    }\n  }\n}\n","import emitter from './emitter'\nimport ecomClient from '@ecomplus/client'\nimport EcomSearch from '@ecomplus/search-engine'\nimport ecomPassport from '@ecomplus/passport-client'\nimport ecomCart from '@ecomplus/shopping-cart'\nimport widgetProductCard from '@ecomplus/widget-product-card'\n\nwindow.ecomClient = ecomClient\nwindow.EcomSearch = EcomSearch\nwindow.ecomPassport = ecomPassport\nwindow.ecomCart = ecomCart\n\nemitter.emit('ecom:ready')\n\nconst isCheckout = window.location.pathname.startsWith('/app/')\nconst isMobile = window.screen.width < 768\nconst widgetsLoadPromises = []\nconst widgetsMsDelay = window.location.hostname === 'localhost' ? 50 : 1\n\nconst loadWidget = (pkg, runImport) => {\n  const waitWidgetResolve = new Promise(resolve => {\n    setTimeout(() => {\n      const widget = window._widgets && window._widgets[pkg]\n      if (widget) {\n        const { active, options, desktopOnly, enableCheckout, disablePages } = widget\n        if (\n          active &&\n          (!desktopOnly || !isMobile) &&\n          (isCheckout ? enableCheckout : !disablePages)\n        ) {\n          return runImport()\n            .then(exp => {\n              if (typeof exp.default === 'function') {\n                exp.default(options)\n              }\n              emitter.emit(`widget:${pkg}`)\n              console.log(`Widget loaded: ${pkg}`)\n            })\n            .catch(console.error)\n            .finally(resolve)\n        }\n      }\n\n      resolve()\n    }, widgetsMsDelay)\n  })\n\n  widgetsLoadPromises.push(waitWidgetResolve)\n}\n\nif (!isCheckout) {\n  const { resource } = document.body.dataset\n  if (resource && resource.startsWith('product')) {\n    loadWidget(\n      '@ecomplus/widget-product',\n      () => import(/* webpackPrefetch: true */\n        '@ecomplus/widget-product')\n    )\n  } else if (document.getElementById('search')) {\n    loadWidget(\n      '@ecomplus/widget-search-engine',\n      () => import(/* webpackPrefetch: true */\n        '@ecomplus/widget-search-engine')\n    )\n  }\n}\n\nPromise.all(widgetsLoadPromises).then(() => {\n  loadWidget(\n    '@ecomplus/widget-product-card',\n    () => Promise.resolve({ default: widgetProductCard })\n  )\n\n  if (!isCheckout) {\n    loadWidget(\n      '@ecomplus/widget-user',\n      () => import('@ecomplus/widget-user')\n    )\n    loadWidget(\n      '@ecomplus/widget-search',\n      () => import('@ecomplus/widget-search')\n    )\n    loadWidget(\n      '@ecomplus/widget-minicart',\n      () => import('@ecomplus/widget-minicart')\n    )\n  }\n\n  Promise.all(widgetsLoadPromises).then(() => {\n    loadWidget(\n      '@ecomplus/widget-tag-manager',\n      () => import('@ecomplus/widget-tag-manager')\n    )\n    loadWidget(\n      '@ecomplus/widget-fb-pixel',\n      () => import('@ecomplus/widget-fb-pixel')\n    )\n    loadWidget(\n      '@ecomplus/widget-trustvox',\n      () => import('@ecomplus/widget-trustvox')\n    )\n  })\n})\n"],"sourceRoot":""}