{"version":3,"sources":["webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/observer.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/rating-widget.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/index.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/rating-search.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/rating-products.js","webpack:///./node_modules/@ecomplus/widget-trustvox/src/lib/comments-products.js"],"names":["el","callback","window","MutationObserver","observe","childList","attributes","characterData","subtree","attributeOldValue","characterDataOldValue","productId","$div","document","createElement","setAttribute","options","$search","trustvoxStoreId","forEach","script","scriptEl","src","body","appendChild","$productCards","getElementsByClassName","skus","$ratingsBySku","i","length","$productCard","dataset","sku","indexOf","$rating","newRatingWidget","style","display","push","$shelf","parentElement","observer","childNodes","toRender","$productCardLink","querySelectorAll","j","_trustvox_shelf_rate","ratingCards","getElementById","$productBlock","context","_context","moConfig","$ratingProduct","$link","className","id","href","title","$shelfContainer","$ratingClickHere","ratingLink","widgetIsRended","mo","$shelfProduct","$productBlockNode","$productName","parentNode","insertBefore","nextSibling","pictures","picture","normal","url","_trustvox","name","$trustvoxWidget","interval","setInterval","disconnect","clearInterval","commentsProduct","console","error","Error"],"mappings":"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","file":"6c44edf6813fb77ca34f.js","sourcesContent":["export default (el, callback) => {\n  const config = {\n    childList: false,\n    attributes: true,\n    characterData: true,\n    subtree: true,\n    attributeOldValue: true,\n    characterDataOldValue: true\n  }\n  const observer = new window.MutationObserver(callback)\n  observer.observe(el, config)\n}\n","export default productId => {\n  const $div = document.createElement('div')\n  $div.setAttribute('data-trustvox-product-code', productId)\n  return $div\n}\n","import ratingCards from './lib/rating-products'\nimport commentsProduct from './lib/comments-products'\nimport ratingSearch from './lib/rating-search'\n\nexport default options => {\n  if (options && options.trustvoxStoreId) {\n    ;[\n      '//static.trustvox.com.br/assets/widget.js',\n      '//s3-sa-east-1.amazonaws.com/trustvox-rate-widget-js/widget.js'\n    ].forEach(script => {\n      const scriptEl = document.createElement('script')\n      scriptEl.src = script\n      document.body.appendChild(scriptEl)\n    })\n\n    ratingCards(options)\n    ratingSearch(options)\n    commentsProduct(options)\n  } else {\n    console.error(new Error('Can\\'t setup Trustvox widget without `trustvoxStoreId` option'))\n  }\n}\n","import observer from './observer'\nimport newRatingWidget from './rating-widget'\n\nexport default () => {\n  const $search = document.getElementById('search')\n\n  if ($search) {\n    observer($search, () => {\n      const $productCards = document.querySelectorAll('#search-engine .product-card')\n\n      for (let i = 0; i < $productCards.length; i++) {\n        const $productCard = $productCards[i]\n        const { sku } = $productCard.dataset\n        const $productCardLink = document.querySelectorAll(`[data-sku=\"${sku}\"] .ec-product-card__link`)\n\n        if ($productCardLink.length) {\n          const $rating = newRatingWidget(sku)\n          for (let j = 0; j < $productCardLink.length; j++) {\n            $productCardLink[j].appendChild($rating)\n          }\n        }\n      }\n\n      window._trustvox_shelf_rate.push(['_productContainer', '#search'])\n    })\n  }\n}\n","import observer from './observer'\nimport newRatingWidget from './rating-widget'\n\nexport default options => {\n  const elClass = 'product-card'\n  const $productCards = document.getElementsByClassName(elClass)\n\n  if ($productCards) {\n    const skus = []\n    const $ratingsBySku = {}\n\n    for (let i = 0; i < $productCards.length; i++) {\n      const $productCard = $productCards[i]\n      if ($productCard && $productCard.dataset) {\n        const { sku } = $productCard.dataset\n        if (skus.indexOf(sku) === -1) {\n          const $rating = newRatingWidget(sku)\n          $rating.style.display = 'none'\n          skus.push(sku)\n          $ratingsBySku[sku] = $rating\n          document.body.appendChild($rating)\n        }\n\n        const $shelf = $productCard.parentElement\n        observer($shelf, () => {\n          for (let i = 0; i < $shelf.childNodes.length; i++) {\n            const $productCard = $shelf.childNodes[i]\n            const { sku, toRender } = $productCard.dataset\n            if (!toRender) {\n              if (skus.indexOf(sku) > -1) {\n                const $rating = $ratingsBySku[sku]\n                const $productCardLink = document.querySelectorAll(`[data-sku=\"${sku}\"] .ec-product-card__link`)\n                if ($productCardLink.length) {\n                  for (let j = 0; j < $productCardLink.length; j++) {\n                    $productCardLink[j].appendChild($rating)\n                  }\n                  $rating.style.display = 'inherit'\n                }\n              }\n            }\n          }\n        })\n      }\n    }\n\n    window._trustvox_shelf_rate = window._trustvox_shelf_rate || []\n    window._trustvox_shelf_rate.push(['_storeId', options.trustvoxStoreId])\n  }\n}\n","export default options => {\n  const $productBlock = document.getElementById('product')\n  const context = window._context.body\n\n  const moConfig = {\n    childList: false,\n    attributes: true,\n    characterData: true,\n    subtree: true,\n    attributeOldValue: true,\n    characterDataOldValue: true\n  }\n\n  if ($productBlock) {\n    const ratingLink = () => {\n      const $link = document.createElement('a')\n      $link.className = 'trustvox-fluid-jump trustvox-widget-rating product-widget-rating'\n      $link.id = 'trustvox-widget-rating'\n      $link.href = '#_trustvox_widget'\n      $link.title = 'Veja as opini√µes de quem comprou esse produto!'\n\n      const $shelfContainer = document.createElement('div')\n      $shelfContainer.className = 'trustvox-shelf-container'\n      $shelfContainer.setAttribute('data-trustvox-product-code', context.sku)\n      $link.appendChild($shelfContainer)\n\n      const $ratingClickHere = document.createElement('span')\n      $ratingClickHere.className = 'rating-click-here'\n      $link.appendChild($ratingClickHere)\n\n      return $link\n    }\n\n    const $ratingProduct = ratingLink()\n    $ratingProduct.style.display = 'none'\n    document.body.appendChild($ratingProduct)\n    let widgetIsRended = false\n\n    let mo = null\n    const $shelfProduct = $productBlock.parentElement\n    for (let i = 0; i < $shelfProduct.childNodes.length; i++) {\n      if ($shelfProduct.childNodes[i].id === 'product') {\n        const callback = () => {\n          for (let j = 0; j < $shelfProduct.childNodes[i].childNodes.length; j++) {\n            const $productBlockNode = $shelfProduct.childNodes[i].childNodes[j]\n            if ($productBlockNode.id === 'product-block') {\n              const { toRender } = $productBlockNode.dataset\n              if (!toRender) {\n                const $productName = document.getElementsByClassName('ec-product__name')[0]\n                if (!widgetIsRended && typeof $productName !== 'undefined') {\n                  $productName.parentNode.insertBefore($ratingProduct, $productName.nextSibling)\n                  $ratingProduct.style.display = 'inherit'\n                  widgetIsRended = true\n                }\n              }\n            }\n          }\n        }\n        mo = new window.MutationObserver(callback)\n        mo.observe($shelfProduct.childNodes[i], moConfig)\n      }\n    }\n\n    const pictures = []\n    context.pictures.forEach(picture => {\n      if (picture.normal) {\n        pictures.push(picture.normal.url)\n      }\n    })\n\n    window._trustvox = window._trustvox || []\n    window._trustvox.push(['_storeId', options.trustvoxStoreId])\n    window._trustvox.push(['_productId', context.sku])\n    window._trustvox.push(['_productName', context.name])\n    window._trustvox.push(['_productPhotos', pictures])\n\n    const $trustvoxWidget = document.createElement('div')\n    $trustvoxWidget.id = '_trustvox_widget'\n    document.getElementById('product').appendChild($trustvoxWidget)\n\n    const interval = setInterval(() => {\n      if (widgetIsRended) {\n        mo.disconnect()\n        clearInterval(interval)\n      }\n    }, 1000)\n  }\n}\n"],"sourceRoot":""}